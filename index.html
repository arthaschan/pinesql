<!DOCTYPE html>
<html>
    <head>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
        <link type="text/css" rel="stylesheet" href="css/index.css" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>PineSQL</title>
    </head>
    <body>
        <header>
          <div class="row">
              <div class="input-field col s12">
                  <input name="run" placeholder="PineSQL-friendly commands only" id="cmd" type="text" style="color: black; -webkit-app-region: no-drag;">
                  <a class="waves-effect waves-light btn" id="run" name="run">Run</a>
              </div>
          </div>
        </header>
        <main>
          <div class="row">
    <form class="col s12">
      <div class="row">
        <div class="input-field col s12">
          <textarea id="log" class="materialize-textarea" readonly></textarea>
        </div>
      </div>
    </form>
  </div>
        </main>
      <script>if (typeof module === 'object') {window.module = module; module = undefined;}</script>
      <script src="js/base.js"></script>
      <script>
      const mysql = require('mysql');
      const electron = require('electron')
      const ipc = require('electron').ipcRenderer
      const run = document.getElementById('run')
      const cmd = document.getElementById('cmd')
      const log = document.getElementById('log')

      run.addEventListener('click', function (event) {
        var split = cmd.value.split(" ");
        switch (split[0]) {
        case "connect":
          appendLog("Connecting to " + split[1] + split[2] + split[3])
          connect(split[1], split[2], split[3])
          break;
        case "exit":
          ipc.send('exit');
          break;
        default:
          appendLog("Error! Command not found.")
          break;
        }
      })

      document.addEventListener("keydown", function (e) {
          if (e.which === 123) {
              ipc.send('developer')
            }
      });

      cmd.addEventListener("keydown", function (e) {
          if (e.which === 13) {
              run.click()
            }
      });
      </script>
      <script src="js/commands.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
      <script type="text/javascript" src="js/materialize.min.js"></script>
      <script>if (window.module) module = window.module;</script>
    </body>
</html>
